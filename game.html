<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/styles.css">
    <link rel="stylesheet" href="./assets/css/bibliotheque.css">
    <link rel="stylesheet" href="./assets/css/game.css">
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <title>Ar√®ne Pok√©mon</title>
</head>

<body>
    <!-- Modal de connexion multijoueur -->
    <div id="multiplayerModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" id="closeModalBtn">&times;</button>
            <img src="./assets/images/combats_title.png" class="title-img" alt="titre">
            <div class="modal-body">
                <div class="first-col">
                    <div id="pokemonCountInfo" class="pokemon-count-info">
                        <p><img src="./assets/images/icons/super-ball.png" class="icon-medium" alt="Pokeball"> <span
                                id="unlockedCount">0</span> Pok√©mons d√©bloqu√©s</p>
                        <p class="info-text">Gagnez des combats pour obtenir des cr√©dits et d√©bloquer de nouveaux
                            Pok√©mons dans la Boutique !</p>
                    </div>

                    <!-- S√©lection de deck -->
                    <div id="deckSelection" class="deck-selection">
                        <label for="deckSelector">Choisir un deck :</label>
                        <select id="deckSelector">
                            <option value="random">üé≤ Deck al√©atoire</option>
                        </select>
                    </div>
                </div>
                <div class="game-mode-buttons">
                    <button id="soloBtn" class="mode-btn">
                        <img src="./assets/images/icons/poing-chance.png" class="icon-big" alt="Game Icon">
                        <span class="mode-title">Solo vs Bot</span>
                        <span class="mode-desc">Affrontez l'ordinateur</span>
                    </button>
                    <button id="hostBtn" class="mode-btn">
                        <img src="./assets/images/icons/lettre-pierre-rochard.png" class="icon-big" alt="Game Icon">
                        <span class="mode-title">Cr√©er une partie</span>
                        <span class="mode-desc">Invitez un ami</span>
                    </button>
                    <button id="joinBtn" class="mode-btn">
                        <img src="./assets/images/icons/scanner.png" class="icon-big" alt="Game Icon">
                        <span class="mode-title">Rejoindre</span>
                        <span class="mode-desc">Rejoignez une partie</span>
                    </button>

                    <!-- Section H√©bergement -->
                    <div id="hostSection" class="connection-section hidden">
                        <h3>Partagez ce lien avec votre ami :</h3>
                        <div class="link-container">
                            <input type="text" id="shareLink" readonly>
                            <button id="copyLinkBtn">üìã Copier</button>
                        </div>
                        <p class="waiting-text">‚è≥ En attente d'un adversaire...</p>
                    </div>

                    <!-- Section Rejoindre -->
                    <div id="joinSection" class="connection-section hidden">
                        <h3>Entrez le code de la partie :</h3>
                        <div class="join-container">
                            <input type="text" id="gameCode" placeholder="Code de la partie">
                            <button id="connectBtn">Rejoindre</button>
                        </div>
                    </div>

                    <!-- Statut de connexion -->
                    <div id="connectionStatus" class="connection-status hidden">
                        <p id="statusText">Connexion en cours...</p>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <header>
        <nav>
            <div class="burger-menu">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="nav-links">
                <a href="index.html">Accueil</a>
                <a href="bibliotheque.html">Boutique</a>
                <a href="deck-builder.html">Mes Decks</a>
                <a href="table.html">Simulation</a>
                <a href="game.html">Jouer</a>
            </div>
            <div class="nav-user">
                <span class="credits-nav"><span class="credits-display">0</span><img
                        src="./assets/images/icons/poke-dollar.png" class="icon-small pokedollar"
                        alt="Pokedollar"></span>
                <span class="user-nav">üë§ <span class="username-display"></span></span>
                <button onclick="ShopSystem.logout()" class="logout-btn">D√©connexion</button>
            </div>
        </nav>
    </header>

    <div class="game-container">
        <!-- Deck adversaire (en haut) -->
        <div class="bot-deck-area">
            <h2>Adversaire</h2>
            <div id="botDeck" class="deck"></div>
        </div>

        <!-- Zone de combat (au centre) -->
        <div class="battle-arena">
            <div class="battle-side">
                <div id="botHealthBar" class="health-bar-wrapper"></div>
                <div id="botCard" class="battle-card-slot">
                    <p>Carte Bot</p>
                </div>
            </div>
            <div class="vs-badge">VS</div>
            <div class="battle-side">
                <div id="playerCard" class="battle-card-slot">
                    <p>Carte Joueur</p>
                </div>
                <div id="playerHealthBar" class="health-bar-wrapper"></div>
            </div>
        </div>

        <!-- Deck joueur (en bas) -->
        <div class="player-deck-area">
            <h2>Vos Pok√©mon</h2>
            <div id="playerDeck" class="deck"></div>
        </div>

        <!-- Panneau d'informations -->
        <div id="battleInfo" class="battle-info">
            <p>Choisissez votre Pok√©mon pour commencer!</p>
        </div>

        <!-- Compteurs de Pok√©mon restants -->
        <div id="botCardsCounter" class="cards-counter cards-counter-left">
            <p>Pok√©mon adverses</p>
            <span class="counter">0</span>
        </div>
        <div id="playerCardsCounter" class="cards-counter cards-counter-right">
            <p>Vos Pok√©mon</p>
            <span class="counter">0</span>
        </div>
        
        <!-- Outils de d√©veloppement (√† supprimer en production) -->
        <div class="dev-tools">
            <button class="dev-btn" onclick="showVictoryModal(500)">üèÜ Test Victoire</button>
            <button class="dev-btn" onclick="showDefeatModal()">üíÄ Test D√©faite</button>
            <small>Raccourcis: Ctrl+V (victoire) | Ctrl+D (d√©faite)</small>
        </div>
    </div>

    <!-- Modal de Victoire -->
    <div id="victoryModal" class="game-end-modal hidden">
        <div class="game-end-modal-content victory-theme">
            <div class="game-end-icon victory-icon">
                <img src="./assets/images/icons/roche-royale.png" alt="Roche Royale">
            </div>
            <h2 class="game-end-title">F√©licitations !</h2>
            <p class="game-end-message">Vous avez vaincu tous les Pok√©mon adverses !</p>
            <p class="game-end-credits"></p>
            <div class="game-end-buttons">
                <button class="game-end-btn replay-btn">
                    <span class="btn-icon"><img src="./assets/images/icons/poke-ball.png" alt="pokeball"></span>
                    <span class="btn-text">Nouveau Combat</span>
                </button>
                <button class="game-end-btn home-btn">
                    <span class="btn-icon"><img src="./assets/images/icons/passe-bateau.png" alt="passebateau"></span>
                    <span class="btn-text">Accueil</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de D√©faite -->
    <div id="defeatModal" class="game-end-modal hidden">
        <div class="game-end-modal-content defeat-theme">
            <div class="game-end-icon defeat-icon">
                <img src="./assets/images/icons/rappel-max.png" alt="Rappel Max">
            </div>
            <h2 class="game-end-title">D√©faite !</h2>
            <p class="game-end-message">Tous vos Pok√©mon sont KO...</p>
            <p class="game-end-encouragement">R√©essayez et devenez plus fort !</p>
            <div class="game-end-buttons">
                <button class="game-end-btn replay-btn">
                    <span class="btn-icon"><img src="./assets/images/icons/poke-ball.png" alt="pokeball"></span>
                    <span class="btn-text">R√©essayer</span>
                </button>
                <button class="game-end-btn home-btn">
                    <span class="btn-icon"><img src="./assets/images/icons/passe-bateau.png" alt="passebateau"></span>
                    <span class="btn-text">Accueil</span>
                </button>
            </div>
        </div>
    </div>

</body>
<script src="assets/js/navbar.js"></script>
<script src="assets/js/config.js"></script>
<script src="assets/js/shop-system.js"></script>
<script src="assets/js/game.js"></script>

</html>